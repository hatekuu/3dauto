"use strict";(self.webpackChunk_3dauto=self.webpackChunk_3dauto||[]).push([[511],{511:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var s=n(5043),o=n(3402),a=n(579);const r=e=>{const[t,n]=(0,s.useState)(null),[o,r]=(0,s.useState)(""),[l,c]=(0,s.useState)(0),[i,d]=(0,s.useState)(70),[u,m]=(0,s.useState)(210),[g,f]=(0,s.useState)(0),[h,x]=(0,s.useState)(""),p=e=>{c(e);const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t," gi\u1edd ").concat(n," ph\xfat"):n>0?"".concat(n," ph\xfat ").concat(s," gi\xe2y"):"".concat(s," gi\xe2y")};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 m-6 p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("input",{type:"file",accept:".gcode",onChange:e=>{const t=e.target.files[0];n(t),f(t.size),x(t.name);const s=new FileReader;s.onload=e=>{const t=e.target.result.match(/;TIME:(\d+)/);if(t){const e=parseInt(t[1],10);r(p(e))}},s.onerror=()=>{console.error("Error reading file.")},t&&s.readAsText(t)},className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none"}),o&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Th\u1eddi gian \u01b0\u1edbc t\xednh: ",o]}),g>0&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["K\xedch th\u01b0\u1edbc file: ",(g/1024).toFixed(2)," KB"]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Nhi\u1ec7t \u0111\u1ed9 b\xe0n in (\xb0C):",(0,a.jsx)("input",{type:"number",value:i,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Nhi\u1ec7t \u0111\u1ed9 \u0111\u1ea7u \u0111\xf9n (\xb0C):",(0,a.jsx)("input",{type:"number",value:u,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),(0,a.jsx)("button",{onClick:async()=>{if(!t)return void alert("Please select a file to upload.");const n=new FileReader;n.onload=async t=>{const n=t.target.result.replace(/M140 S\d+/g,"M140 S".concat(i)).replace(/M104 S\d+/g,"M104 S".concat(u)),s=Number((g/1024).toFixed(2)),o=e.id;e.setData({fileContent:n,KB:s,time:l,userId:o,fileName:h})},n.readAsText(t)},className:"mt-6 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Upload"})]})},l=e=>{var t;const n=e=>{if(e<0)return"\u0110ang ch\u1edd \u0111\u01b0\u1ee3c x\u1eed l\xfd";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.ceil(e%60);return"".concat(t," gi\u1edd ").concat(n," ph\xfat ").concat(s," gi\xe2y")};return(0,a.jsx)("div",{className:"fixed top-4 right-2/4 space-y-4",children:null===(t=e.fileData)||void 0===t?void 0:t.fileList.map((e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg shadow-md bg-white",children:[(0,a.jsxs)("p",{className:"font-semibold text-lg",children:["T\xean file: ",(0,a.jsx)("span",{className:"font-normal",children:e.fileName})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Th\u1eddi gian ch\u1edd d\u1ef1 ki\u1ebfn: ",(0,a.jsx)("span",{className:"font-normal",children:n(e.waitingTime)})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["S\u1ed1 th\u1ee9 t\u1ef1: ",(0,a.jsx)("span",{className:"font-normal",children:0===e.index?"\u0110ang in":e.index})]})]},e.fileid)))})},c=new o.qw({id:"greencard-hgxjomf"}),i=()=>{var e;const[t,n]=(0,s.useState)(""),[o,i]=(0,s.useState)(null);(0,s.useEffect)((()=>{""!==t&&u(),d()}),[t,o]);const d=async()=>{try{var e;await(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.refreshAccessToken()),console.log("\u0111\xe3 refresh")}catch(n){console.log(n)}const t=c.currentUser;if(t&&""!==t.accessToken)try{const e=await c.currentUser.callFunction("userfile");i(e[0]),console.log(e[0])}catch(n){console.log(n.error)}else window.location.href="/3dauto/login"},u=async()=>{try{await c.currentUser.callFunction("uploadfile",t);window.location.reload()}catch(e){console.log(e.error)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(r,{setData:n,id:null===(e=c.currentUser)||void 0===e?void 0:e.id}),(0,a.jsx)(l,{fileData:o}),(0,a.jsx)("button",{onClick:async()=>{await c.currentUser.logOut(),window.location.reload()},children:"logout"})]})}}}]);
//# sourceMappingURL=511.858827b3.chunk.js.map